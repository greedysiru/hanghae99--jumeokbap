<html>

<head>
    <title>회원가입 화면</title>
    <script>
        //id 비밀번호 정규 표현식
        function is_nickname(asValue) {
            var regExp = /^(?=.*[a-zA-Z])[-a-zA-Z0-9_.]{2,10}$/;
            return regExp.test(asValue);
        }

        function is_password(asValue) {
            var regExp = /^(?=.*\d)(?=.*[a-zA-Z])[0-9a-zA-Z!@#$%^&*]{8,20}$/;
            return regExp.test(asValue);
        }


        
        // 아이디 중복확인 API (POST)
        function check_dup() {
        let username = $("#input-username").val()
        console.log(username)
        if (username == "") {
            $("#help-id").text("아이디를 입력해주세요.").removeClass("is-safe").addClass("is-danger")
            $("#input-username").focus()
            return;
        }
        if (!is_nickname(username)) {
            $("#help-id").text("아이디의 형식을 확인해주세요. 영문과 숫자, 일부 특수문자(._-) 사용 가능. 2-10자 길이").removeClass("is-safe").addClass("is-danger")
            $("#input-username").focus()
            return;
        }
        $("#help-id").addClass("is-loading")
        $.ajax({
            type: "POST",
            url: "/sign_up/check_dup",
            data: {
                username_give: username
            },
            success: function (response) {

                if (response["exists"]) {
                    $("#help-id").text("이미 존재하는 아이디입니다.").removeClass("is-safe").addClass("is-danger")
                    $("#input-username").focus()
                } else {
                    $("#help-id").text("사용할 수 있는 아이디입니다.").removeClass("is-danger").addClass("is-success")
                }
                $("#help-id").removeClass("is-loading")

            }
        });
    }

    </script>
    <style>
        #wrap {
            width: 530px;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
        }

        table {
            border: 3px solid skyblue
        }

        td {
            border: 1px solid skyblue
        }

        #title {
            background-color: skyblue
        }
    </style>
</head>

<body>
    <!-- 왼쪽, 오른쪽 바깥여백을 auto로 중앙정렬  -->
    <div id="wrap">
        <br><br>
        <b>
            <font size="6" color="gray">주먹밥 회원가입</font>
        </b>
        <br><br><br>

        <form>
            <table>
                <tr>
                    <td id="title">아이디</td>
                    <td>
                        <input id="input-username" type="text" name="id" maxlength="20" placeholder="2-10자의 영문 숫자와 특수문자(._-)">
                        
                        <!-- <input type="button" value="중복확인"> -->
                        <div id="btn-check-dup" class="control is-hidden">
                            <button class="button is-sparta" onclick="check_dup()">중복확인</button>
                        </div>
                        <p id="help-id" class="help">아이디는 2-10자의 영문과 숫자의 일부 특수문자(._-)만 입력 가능합니다</p>
                        <p id="help-id-login" class="help is-danger"></p>
                    </td>
                </tr>

                <tr>
                    <td id="title">비밀번호</td>
                    <td>
                        <input type="password" name="password" maxlength="15" placeholder="영문과 숫자 조합의 8-20자">
                        <p id="help-password" class="help">영문과 숫자 조합의 8-20자의 비밀번호를 설정해주세요. 특수문자(!@#$%^&*)도 사용 가능합니다.</p>
                    </td>
                    
                </tr>

                <tr>
                    <td id="title">비밀번호 확인</td>
                    <td>
                        <input type="password" name="password" maxlength="15" placeholder="Password">
                    </td>
                </tr>

                <tr>
                    <td id="title">이름</td>
                    <td>
                        <input type="text" name="name" maxlength="40" placeholder="Name">
                    </td>
                </tr>

                <tr>
                    <td id="title">성별</td>
                    <td>
                        <input type="radio" name="gender" value="남" checked>남
                        <input type="radio" name="gender" value="여" checked>여
                    </td>
                </tr>

                <tr>
                    <td id="title">생일</td>
                    <td>
                        <input type="text" name="birth_yy" maxlength="4" placeholder="년(4자)" size="6">
                        <select name="birth_mm">
                            <option value="">월</option>
                            <option value="01">1</option>
                            <option value="02">2</option>
                            <option value="03">3</option>
                            <option value="04">4</option>
                            <option value="05">5</option>
                            <option value="06">6</option>
                            <option value="07">7</option>
                            <option value="08">8</option>
                            <option value="09">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                        </select>
                        <input type="text" name="birth_dd" maxlength="2" placeholder="일" size="4">
                    </td>
                </tr>

                <tr>
                    <td id="title">이메일</td>
                    <td>
                        <input type="text" name="email_1" maxlength="30" placeholder="Email">@
                        <select name="email_2">
                            <option>naver.com</option>
                            <option>daum.net</option>
                            <option>gmail.com</option>
                            <option>nate.com</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td id="title">휴대전화</td>
                    <td>
                        <input type="text" name="phone" placeholder="010-1234-5678"/>
                    </td>
                </tr>
                <tr>
                    <td id="title">주소</td>
                    <td>
                        <input type="text" size="50" name="address" />
                    </td>
                </tr>
            </table>
            <br>
            <input type="submit" value="가입" /> <input type="button" value="취소">
        </form>
    </div>



</body>

</html>